"use strict";(self.webpackChunkkinosearch_v2=self.webpackChunkkinosearch_v2||[]).push([[889],{5889:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(4165),a=n(5861),c=n(9439),s=n(2791),i=n(6871),u=n(9478),l=n(4569),o=n.n(l),h=n(4370),p=n(9712),d=n(1605),f=n(9555),x=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post("".concat(u.Z.ks_api,"/history/watch/").concat(t),null,{headers:{Authorization:"Bearer ".concat((0,f.YT)())}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),v=n(184);var k=function(){var e=(0,i.UO)().filmId,t=s.useState(!1),n=(0,c.Z)(t,2),l=n[0],f=n[1],k=s.useState(""),j=(0,c.Z)(k,2),Z=j[0],m=j[1],w=s.useState(!0),S=(0,c.Z)(w,2),b=S[0],y=S[1],_=s.useState(null),g=(0,c.Z)(_,2),K=g[0],X=g[1];return s.useEffect((function(){var t=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var n,a,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!1),y(!0),X(null),t.prev=3,t.next=6,o().get("".concat(u.Z.api_url,"/films/").concat(e),{headers:{"X-API-KEY":u.Z.api_token}});case 6:if(200!==(n=t.sent).status){t.next=23;break}return m(n.data.nameRu||n.data.nameEn),f(!1),t.prev=10,t.next=13,o().post("".concat(u.Z.ks_api,"/player/").concat(e));case 13:a=t.sent,c=a.data,X(c.player),x(e),t.next=21;break;case 19:t.prev=19,t.t0=t.catch(10);case 21:t.next=24;break;case 23:f(!0);case 24:t.next=29;break;case 26:t.prev=26,t.t1=t.catch(3),f(!0);case 29:return t.prev=29,y(!1),t.finish(29);case 32:case"end":return t.stop()}}),t,null,[[3,26,29,32],[10,19]])})));return function(){return t.apply(this,arguments)}}();t()}),[e]),(0,v.jsx)("div",{children:b&&(0,v.jsxs)("div",{children:[(0,v.jsx)(h.D,{title:"KinoSearch"}),(0,v.jsx)(d.Z,{})]})||(0,v.jsx)("div",{children:l&&(0,v.jsxs)(p.M5,{h:"80vh",children:[(0,v.jsx)(h.D,{title:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u2013 KinoSearch"}),(0,v.jsx)(p.X6,{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]})||(0,v.jsxs)("div",{children:[(0,v.jsx)(h.D,{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0444\u0438\u043b\u044c\u043c\u0430 \u2013 KinoSearch"}),(0,v.jsx)(p.M5,{paddingBottom:10,children:(0,v.jsx)(p.X6,{size:"xl",fontWeight:"800",children:Z})}),K&&(0,v.jsx)(p.W2,{h:["auto","50vh"],children:(0,v.jsx)("iframe",{title:"player",src:K,frameBorder:0,allowFullScreen:!0,style:{width:"100%",height:"100%"}})})||(0,v.jsx)(p.X6,{size:"md",fontWeight:"600",children:"\u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442, \u043f\u043b\u0435\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."})]})})})}}}]);
//# sourceMappingURL=889.70f7a4b6.chunk.js.map