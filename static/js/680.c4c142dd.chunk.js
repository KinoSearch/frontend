"use strict";(self.webpackChunkkinosearch_v2=self.webpackChunkkinosearch_v2||[]).push([[680],{6496:function(e,r,n){n.d(r,{RL:function(){return l},UZ:function(){return d}});var a=n(4165),t=n(5861),o=n(1881),i=n.n(o),c=n(7519),s=(n(7313),n(2335)),l=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i().post("".concat(s.Z.ks_api,"/history/watch/").concat(r),null,{headers:{Authorization:"Bearer ".concat((0,c.YT)())}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(r){return e.apply(this,arguments)}}(),d=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i().post("".concat(s.Z.ks_api,"/history/list/clear"),null,{headers:{Authorization:"Bearer ".concat((0,c.YT)())}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},3680:function(e,r,n){n.r(r),n.d(r,{default:function(){return D}});var a=n(4165),t=n(5861),o=n(9439),i=n(7313),c=n(4390),s=n(3964),l=n(1413),d=n(4925),u=n(416),m=n(139),h=n(7872),v=n(87),f=n(5098),p=["name","getInitials"],x=["src","srcSet","name","showBorder","borderRadius","onError","getInitials","icon","iconLabel","loading","children","borderColor","ignoreFallback"],g=["children","borderColor","max","spacing","borderRadius"],b=(0,v.kr)({name:"AvatarStylesContext",errorMessage:"useAvatarStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Avatar />\" "}),Z=(0,o.Z)(b,2),w=Z[0],k=Z[1];function _(e){var r=e.split(" "),n=(0,o.Z)(r,2),a=n[0],t=n[1];return a&&t?"".concat(a.charAt(0)).concat(t.charAt(0)):a.charAt(0)}function C(e){var r=e.name,n=e.getInitials,a=(0,d.Z)(e,p),t=k();return i.createElement(u.m$.div,(0,l.Z)((0,l.Z)({role:"img","aria-label":r},a),{},{__css:t.label}),r?null==n?void 0:n(r):null)}function j(e){var r=e.src,n=e.srcSet,a=e.onError,t=e.getInitials,o=e.name,c=e.borderRadius,s=e.loading,l=e.iconLabel,d=e.icon,m=void 0===d?i.createElement(E,null):d,h=e.ignoreFallback,v=e.referrerPolicy,p=(0,f.d9)({src:r,onError:a,ignoreFallback:h});return!r||!("loaded"===p)?o?i.createElement(C,{className:"chakra-avatar__initials",getInitials:t,name:o}):(0,i.cloneElement)(m,{role:"img","aria-label":l}):i.createElement(u.m$.img,{src:r,srcSet:n,alt:o,referrerPolicy:v,className:"chakra-avatar__img",loading:s,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:c}})}h.Ts&&(j.displayName="AvatarImage");var E=function(e){return i.createElement(u.m$.svg,(0,l.Z)({viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg"},e),i.createElement("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),i.createElement("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"}))},y={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},A=(0,u.Gp)((function(e,r){var n=(0,u.jC)("Avatar",e),a=(0,m.Lr)(e),t=a.src,o=a.srcSet,c=a.name,s=a.showBorder,v=a.borderRadius,f=void 0===v?"full":v,p=a.onError,g=a.getInitials,b=void 0===g?_:g,Z=a.icon,k=void 0===Z?i.createElement(E,null):Z,C=a.iconLabel,A=void 0===C?" avatar":C,S=a.loading,N=a.children,L=a.borderColor,z=a.ignoreFallback,R=(0,d.Z)(a,x),I=(0,l.Z)((0,l.Z)({borderRadius:f,borderWidth:s?"2px":void 0},y),n.container);return L&&(I.borderColor=L),i.createElement(u.m$.span,(0,l.Z)((0,l.Z)({ref:r},R),{},{className:(0,h.cx)("chakra-avatar",e.className),__css:I}),i.createElement(w,{value:n},i.createElement(j,{src:t,srcSet:o,loading:S,onError:p,getInitials:b,name:c,borderRadius:f,icon:k,iconLabel:A,ignoreFallback:z}),N))}));h.Ts&&(A.displayName="Avatar");var S=(0,u.Gp)((function(e,r){var n=(0,u.jC)("Avatar",e),a=(0,m.Lr)(e),t=a.children,o=a.borderColor,c=a.max,s=a.spacing,f=void 0===s?"-0.75rem":s,p=a.borderRadius,x=void 0===p?"full":p,b=(0,d.Z)(a,g),Z=(0,v.WR)(t),w=c?Z.slice(0,c):Z,k=null!=c&&Z.length-c,_=w.reverse().map((function(r,n){var a,t={marginEnd:0===n?0:f,size:e.size,borderColor:null!==(a=r.props.borderColor)&&void 0!==a?a:o,showBorder:!0};return(0,i.cloneElement)(r,(0,h.YU)(t))})),C=(0,l.Z)((0,l.Z)({borderRadius:x,marginStart:f},y),n.excessLabel);return i.createElement(u.m$.div,(0,l.Z)((0,l.Z)({ref:r,role:"group",__css:{display:"flex",alignItems:"center",justifyContent:"flex-end",flexDirection:"row-reverse"}},b),{},{className:(0,h.cx)("chakra-avatar__group",e.className)}),k>0&&i.createElement(u.m$.span,{className:"chakra-avatar__excess",__css:C},"+".concat(k)),_)}));h.Ts&&(S.displayName="AvatarGroup");var N=(0,u.Gp)((function(e,r){var n=k(),a=(0,l.Z)({position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",insetEnd:"0",bottom:"0"},n.badge);return i.createElement(u.m$.div,(0,l.Z)((0,l.Z)({ref:r},e),{},{className:(0,h.cx)("chakra-avatar__badge",e.className),__css:a}))}));h.Ts&&(N.displayName="AvatarBadge");var L=n(9748),z=n(222),R=n(7519),I=n(1881),T=n.n(I),M=n(1875),B=n(7890),W=n(9466),F=n(2335),U=n(6496),$=n(6417);var D=function(){var e=i.useState(null),r=(0,o.Z)(e,2),n=r[0],l=r[1],d=(0,B.s0)(),u=(0,c.pm)(),m=i.useState(window.innerWidth),h=(0,o.Z)(m,2),v=h[0],f=h[1];i.useEffect((function(){var e=function(){f(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var p=v<=768;return i.useEffect((function(){var e=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T().get("".concat(F.Z.ks_api,"/user/info"),{headers:{Authorization:"Bearer ".concat((0,R.YT)())}});case 3:r=e.sent,n=r.data,l(n.user),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,$.jsx)($.Fragment,{children:!n&&(0,$.jsx)(M.Z,{})||(0,$.jsxs)(s.xu,{w:"100%",children:[(0,$.jsx)(z.D,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u2013 KinoSearch"}),(0,$.jsxs)(s.Kq,{direction:"row",w:"100%",justifyContent:"space-between",children:[(0,$.jsx)(s.xu,{}),(0,$.jsx)(s.rU,{color:"brand.500",_hover:{textDecoration:"none",color:"brand.600"},onClick:function(){(0,R.RD)(),window.location.href="/"},children:"\u0412\u044b\u0439\u0442\u0438"})]}),(0,$.jsx)(s.M5,{children:(0,$.jsxs)(s.W2,{paddingTop:10,maxW:["full","sm"],children:[(0,$.jsx)(s.M5,{children:(0,$.jsxs)(s.Kq,{direction:"column",spacing:"10px",children:[(0,$.jsx)(A,{bg:"brand.500",w:"200px",h:"200px"}),(0,$.jsx)(s.M5,{children:(0,$.jsx)(s.xv,{fontSize:"lg",fontWeight:"bold",children:n.email})}),(0,$.jsx)(s.M5,{children:(0,$.jsx)(L.zx,{colorScheme:"brand",size:"sm",variant:"outline",as:W.rU,to:"/settings/edit",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})})]})}),(0,$.jsx)(s.M5,{paddingTop:5,children:(0,$.jsx)(L.zx,{colorScheme:"brand",size:"md",onClick:function(){(0,U.UZ)(),u({title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043e\u0447\u0438\u0449\u0435\u043d\u0430!",status:"success",duration:3e3,isClosable:!0,variant:p?"top-accent":"left-accent",position:p?"top":"bottom-left"})},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430"})}),(0,$.jsx)(s.M5,{paddingTop:5,children:(0,$.jsx)(s.rU,{color:"brand.500",_hover:{textDecoration:"none",color:"brand.600"},as:W.rU,to:"/contacts",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})})]})})]})})}}}]);