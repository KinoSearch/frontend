{"version":3,"file":"static/js/327.e4f6bb45.chunk.js","mappings":"+MAoDA,MA/BA,YAAwE,IAAxDA,EAAuD,EAAvDA,KAAMC,EAAiD,EAAjDA,SACrB,OACC,SAAC,KAAD,CACCC,KAAMD,EAAW,OAAS,QAC1BE,EAAGF,EAAW,OAAS,QACvBG,KAAMH,EAAW,OAAS,QAH3B,UAKC,SAAC,KAAD,CAAKI,GAAIC,EAAAA,GAAOC,GAAE,gBAAWP,EAAKQ,aAAeR,EAAKS,QAAtD,UACC,UAAC,KAAD,CAAOC,UAAU,SAASC,QAAQ,OAAlC,WACC,SAAC,EAAAC,cAAD,CACCC,IAAKb,EAAKc,UACVC,MAAOd,EAAW,OAAS,QAC3Be,OAAQf,EAAW,OAAS,QAC5BgB,UAAU,eACVC,OAAO,UAER,SAAC,KAAD,CACCC,KAAK,KACLf,KAAMH,EAAW,OAAS,QAC1BmB,SAAS,SACTC,aAAa,WACbC,WAAYrB,EAAW,SAAW,SALnC,SAOED,EAAKuB,QAAUvB,EAAKwB,eAM1B,C,qBC3CD,IAPgB,CACfC,UAAW,uCACXC,QAAS,+CACTC,WAAY,+CACZC,yBAA0B,+C,oLC0G3B,UA9FA,WACC,OAAsCC,EAAAA,EAAAA,MAAtC,eAAKC,EAAL,KAAmBC,EAAnB,KACA,EAA8BC,EAAAA,SAAoB,IAAlD,eAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAgCF,EAAAA,UAAwB,GAAxD,eAAOG,EAAP,KAAiBC,EAAjB,KACA,EAAkCJ,EAAAA,UAAwB,GAA1D,eAAOK,EAAP,KAAkBC,EAAlB,KAEAN,EAAAA,WAAgB,WACf,IAAMO,EAAM,yCAAG,kGACdD,GAAa,GADC,kBAGeE,IAAAA,IAC3BC,UAAU,GAAD,OACLC,EAAAA,EAAAA,WADK,4CAEPZ,EAAaa,IAAI,MAAQ,KAG3B,CACCC,QAAS,CACR,YAAaF,EAAAA,EAAAA,aAXH,gBAGCG,EAHD,EAGLC,KAYRZ,EAAWW,EAAIE,OACU,IAArBF,EAAIE,MAAMC,OACbZ,GAAY,GAEZA,GAAY,GAnBA,uBAsBbE,GAAa,GAtBA,yEAAH,qDAyBZC,GAEA,GAAE,CAACT,EAAaa,IAAI,OAKrB,OAAmCM,EAAAA,EAAAA,MAA3BC,EAAR,EAAQA,SAEFC,GAAWC,EAFjB,EAAkBA,eAEY,SAACN,GAC9Bf,EAAgB,CAAEsB,EAAGP,EAAKO,GAC1B,IAED,OACC,iCACC,SAAC,KAAD,CAAWC,WAAY,GAAvB,UACC,iBAAMH,SAAUA,EAAhB,UACC,SAAC,MAAD,QACCI,aAAczB,EAAaa,IAAI,MAAQ,GACvCa,YAAY,iCACZC,YAAY,UACZC,aAAa,OACbC,iBAAiB,YACjBC,aAAc,CAAEC,SAAU,OAAQC,MAAO,UACrCZ,EAAS,YAIhB,SAAC,KAAD,CAAKI,WAAY,GAAjB,UACIjB,IACF,8BACGF,IACD,SAAC,KAAD,WACC,SAAC,KAAD,+GAGD,iCACC,SAAC,KAAD,CAAS4B,WAAW,MAAM5C,KAAK,KAA/B,gHAGA,SAAC,KAAD,CAAKmC,WAAY,EAAjB,UACC,SAAC,KAAD,CAAYU,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAIrD,QAAQ,OAAjD,SACEsB,EAAQgC,KAAI,SAACjE,GAAD,OACZ,SAAC,IAAD,CAAMA,KAAMA,EAAMC,UAAQ,GADd,eASlB,SAAC,KAAD,CAAKE,EAAE,OAAP,UACC,SAAC,KAAD,WACC,SAAC,IAAD,CAAS2D,MAAM,YAAY3C,KAAK,eAOtC,C","sources":["components/Film.tsx","config.ts","pages/Search.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { Box, Heading, Stack } from \"@chakra-ui/react\";\r\nimport { Link as RLink } from \"react-router-dom\";\r\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\r\nimport \"../css/Film.css\";\r\nimport \"react-lazy-load-image-component/src/effects/blur.css\";\r\n\r\ninterface IFilm {\r\n\tkinopoiskId: number | undefined;\r\n\tfilmId: number | undefined;\r\n\tnameRu: any;\r\n\tnameEn: any;\r\n\tyear?: number;\r\n\tposterUrl: string;\r\n\tposterUrlPreview: string;\r\n\tcountries?: any;\r\n\tgenres?: any;\r\n\tduration?: number | null | undefined;\r\n\tpremiereRu?: string | null | undefined;\r\n}\r\n\r\nfunction Film({ film, isSearch }: { film: IFilm; isSearch?: boolean }) {\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tminW={isSearch ? \"full\" : \"140px\"}\r\n\t\t\tw={isSearch ? \"full\" : \"140px\"}\r\n\t\t\tmaxW={isSearch ? \"full\" : \"140px\"}\r\n\t\t>\r\n\t\t\t<Box as={RLink} to={`/film/${film.kinopoiskId || film.filmId}`}>\r\n\t\t\t\t<Stack direction=\"column\" spacing=\"10px\">\r\n\t\t\t\t\t<LazyLoadImage\r\n\t\t\t\t\t\tsrc={film.posterUrl}\r\n\t\t\t\t\t\twidth={isSearch ? \"auto\" : \"140px\"}\r\n\t\t\t\t\t\theight={isSearch ? \"auto\" : \"210px\"}\r\n\t\t\t\t\t\tclassName=\"poster_image\"\r\n\t\t\t\t\t\teffect=\"blur\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Heading\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\tmaxW={isSearch ? \"full\" : \"140px\"}\r\n\t\t\t\t\t\toverflow=\"hidden\"\r\n\t\t\t\t\t\ttextOverflow=\"ellipsis\"\r\n\t\t\t\t\t\twhiteSpace={isSearch ? \"normal\" : \"nowrap\"}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{film.nameRu || film.nameEn}\r\n\t\t\t\t\t</Heading>\r\n\t\t\t\t</Stack>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t);\r\n}\r\n\r\nexport default Film;\r\n","const config =  {\r\n\tapi_token: \"3c7ce227-9391-4706-8da8-5adeee8e739c\", // api token from kinopoiskapiunofficial.tech\r\n\tapi_url: \"https://kinopoiskapiunofficial.tech/api/v2.2\",\r\n\tsearch_url: \"https://kinopoiskapiunofficial.tech/api/v2.1\",\r\n\tsequels_and_prequels_url: \"https://kinopoiskapiunofficial.tech/api/v2.1\",\r\n};\r\n\r\nexport default config;\r\n","import React from \"react\";\r\nimport {\r\n\tBox,\r\n\tContainer,\r\n\tInput,\r\n\tHeading,\r\n\tSimpleGrid,\r\n\tCenter,\r\n\tSpinner,\r\n} from \"@chakra-ui/react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport config from \"../config\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport Film from \"../components/Film\";\r\n\r\nfunction Search() {\r\n\tlet [searchParams, setSearchParams] = useSearchParams();\r\n\tconst [results, setResults] = React.useState<any>([]);\r\n\tconst [notFound, setNotFound] = React.useState<boolean>(false);\r\n\tconst [isLoading, setIsLoading] = React.useState<boolean>(false);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst search = async () => {\r\n\t\t\tsetIsLoading(true);\r\n\t\t\ttry {\r\n\t\t\t\tconst { data: res } = await axios.get(\r\n\t\t\t\t\tencodeURI(\r\n\t\t\t\t\t\t`${config.search_url}/films/search-by-keyword?keyword=${\r\n\t\t\t\t\t\t\tsearchParams.get(\"q\") || \"\"\r\n\t\t\t\t\t\t}`\r\n\t\t\t\t\t),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\"X-API-KEY\": config.api_token,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\tsetResults(res.films);\r\n\t\t\t\tif (res.films.length === 0) {\r\n\t\t\t\t\tsetNotFound(true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetNotFound(false);\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t}\r\n\t\t};\r\n\t\tsearch();\r\n\t\t// eslint-disable-next-line\r\n\t}, [searchParams.get(\"q\")]);\r\n\r\n\ttype FormData = {\r\n\t\tq: string;\r\n\t};\r\n\tconst { register, handleSubmit } = useForm<FormData>();\r\n\r\n\tconst onSubmit = handleSubmit((data) => {\r\n\t\tsetSearchParams({ q: data.q });\r\n\t});\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Container paddingTop={20}>\r\n\t\t\t\t<form onSubmit={onSubmit}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tdefaultValue={searchParams.get(\"q\") || \"\"}\r\n\t\t\t\t\t\tplaceholder=\"Поиск\"\r\n\t\t\t\t\t\tborderColor=\"#929292\"\r\n\t\t\t\t\t\tborderRadius=\"20px\"\r\n\t\t\t\t\t\tfocusBorderColor=\"brand.500\"\r\n\t\t\t\t\t\t_placeholder={{ fontSize: \"16px\", color: \"white\" }}\r\n\t\t\t\t\t\t{...register(\"q\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</form>\r\n\t\t\t</Container>\r\n\t\t\t<Box paddingTop={10}>\r\n\t\t\t\t{(!isLoading && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{(notFound && (\r\n\t\t\t\t\t\t\t<Center>\r\n\t\t\t\t\t\t\t\t<Heading>Ничего не найдено</Heading>\r\n\t\t\t\t\t\t\t</Center>\r\n\t\t\t\t\t\t)) || (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Heading fontWeight=\"700\" size=\"lg\">\r\n\t\t\t\t\t\t\t\t\tРезультаты поиска\r\n\t\t\t\t\t\t\t\t</Heading>\r\n\t\t\t\t\t\t\t\t<Box paddingTop={5}>\r\n\t\t\t\t\t\t\t\t\t<SimpleGrid columns={[2, 3, 4, 5, 6, 7]} spacing=\"20px\">\r\n\t\t\t\t\t\t\t\t\t\t{results.map((film: any) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<Film film={film} isSearch />\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</SimpleGrid>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)) || (\r\n\t\t\t\t\t<Box w=\"full\">\r\n\t\t\t\t\t\t<Center>\r\n\t\t\t\t\t\t\t<Spinner color=\"brand.500\" size=\"xl\" />\r\n\t\t\t\t\t\t</Center>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Search;\r\n"],"names":["film","isSearch","minW","w","maxW","as","RLink","to","kinopoiskId","filmId","direction","spacing","LazyLoadImage","src","posterUrl","width","height","className","effect","size","overflow","textOverflow","whiteSpace","nameRu","nameEn","api_token","api_url","search_url","sequels_and_prequels_url","useSearchParams","searchParams","setSearchParams","React","results","setResults","notFound","setNotFound","isLoading","setIsLoading","search","axios","encodeURI","config","get","headers","res","data","films","length","useForm","register","onSubmit","handleSubmit","q","paddingTop","defaultValue","placeholder","borderColor","borderRadius","focusBorderColor","_placeholder","fontSize","color","fontWeight","columns","map"],"sourceRoot":""}