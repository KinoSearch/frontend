"use strict";(self.webpackChunkkinosearch_v2=self.webpackChunkkinosearch_v2||[]).push([[680],{6496:function(e,r,a){a.d(r,{RL:function(){return l},UZ:function(){return d}});var n=a(4165),t=a(5861),o=a(1881),c=a.n(o),i=a(7519),s=(a(7313),a(2335)),l=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().post("".concat(s.Z.ks_api,"/history/watch/").concat(r),null,{headers:{Authorization:"Bearer ".concat((0,i.YT)())}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(r){return e.apply(this,arguments)}}(),d=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().post("".concat(s.Z.ks_api,"/history/list/clear"),null,{headers:{Authorization:"Bearer ".concat((0,i.YT)())}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},3680:function(e,r,a){a.r(r),a.d(r,{default:function(){return D}});var n=a(4165),t=a(5861),o=a(9439),c=a(7313),i=a(4390),s=a(3964),l=a(1413),d=a(4925),u=a(416),m=a(139),h=a(7872),v=a(87),p=a(5098),f=["name","getInitials"],x=["src","srcSet","name","showBorder","borderRadius","onError","getInitials","icon","iconLabel","loading","children","borderColor","ignoreFallback"],g=["children","borderColor","max","spacing","borderRadius"],b=(0,v.kr)({name:"AvatarStylesContext",errorMessage:"useAvatarStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Avatar />\" "}),Z=(0,o.Z)(b,2),k=Z[0],_=Z[1];function C(e){var r=e.split(" "),a=(0,o.Z)(r,2),n=a[0],t=a[1];return n&&t?"".concat(n.charAt(0)).concat(t.charAt(0)):n.charAt(0)}function j(e){var r=e.name,a=e.getInitials,n=(0,d.Z)(e,f),t=_();return c.createElement(u.m$.div,(0,l.Z)((0,l.Z)({role:"img","aria-label":r},n),{},{__css:t.label}),r?null==a?void 0:a(r):null)}function w(e){var r=e.src,a=e.srcSet,n=e.onError,t=e.getInitials,o=e.name,i=e.borderRadius,s=e.loading,l=e.iconLabel,d=e.icon,m=void 0===d?c.createElement(E,null):d,h=e.ignoreFallback,v=e.referrerPolicy,f=(0,p.d9)({src:r,onError:n,ignoreFallback:h});return!r||!("loaded"===f)?o?c.createElement(j,{className:"chakra-avatar__initials",getInitials:t,name:o}):(0,c.cloneElement)(m,{role:"img","aria-label":l}):c.createElement(u.m$.img,{src:r,srcSet:a,alt:o,referrerPolicy:v,className:"chakra-avatar__img",loading:s,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:i}})}h.Ts&&(w.displayName="AvatarImage");var E=function(e){return c.createElement(u.m$.svg,(0,l.Z)({viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg"},e),c.createElement("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),c.createElement("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"}))},y={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},A=(0,u.Gp)((function(e,r){var a=(0,u.jC)("Avatar",e),n=(0,m.Lr)(e),t=n.src,o=n.srcSet,i=n.name,s=n.showBorder,v=n.borderRadius,p=void 0===v?"full":v,f=n.onError,g=n.getInitials,b=void 0===g?C:g,Z=n.icon,_=void 0===Z?c.createElement(E,null):Z,j=n.iconLabel,A=void 0===j?" avatar":j,S=n.loading,N=n.children,R=n.borderColor,I=n.ignoreFallback,L=(0,d.Z)(n,x),T=(0,l.Z)((0,l.Z)({borderRadius:p,borderWidth:s?"2px":void 0},y),a.container);return R&&(T.borderColor=R),c.createElement(u.m$.span,(0,l.Z)((0,l.Z)({ref:r},L),{},{className:(0,h.cx)("chakra-avatar",e.className),__css:T}),c.createElement(k,{value:a},c.createElement(w,{src:t,srcSet:o,loading:S,onError:f,getInitials:b,name:i,borderRadius:p,icon:_,iconLabel:A,ignoreFallback:I}),N))}));h.Ts&&(A.displayName="Avatar");var S=(0,u.Gp)((function(e,r){var a=(0,u.jC)("Avatar",e),n=(0,m.Lr)(e),t=n.children,o=n.borderColor,i=n.max,s=n.spacing,p=void 0===s?"-0.75rem":s,f=n.borderRadius,x=void 0===f?"full":f,b=(0,d.Z)(n,g),Z=(0,v.WR)(t),k=i?Z.slice(0,i):Z,_=null!=i&&Z.length-i,C=k.reverse().map((function(r,a){var n,t={marginEnd:0===a?0:p,size:e.size,borderColor:null!==(n=r.props.borderColor)&&void 0!==n?n:o,showBorder:!0};return(0,c.cloneElement)(r,(0,h.YU)(t))})),j=(0,l.Z)((0,l.Z)({borderRadius:x,marginStart:p},y),a.excessLabel);return c.createElement(u.m$.div,(0,l.Z)((0,l.Z)({ref:r,role:"group",__css:{display:"flex",alignItems:"center",justifyContent:"flex-end",flexDirection:"row-reverse"}},b),{},{className:(0,h.cx)("chakra-avatar__group",e.className)}),_>0&&c.createElement(u.m$.span,{className:"chakra-avatar__excess",__css:j},"+".concat(_)),C)}));h.Ts&&(S.displayName="AvatarGroup");var N=(0,u.Gp)((function(e,r){var a=_(),n=(0,l.Z)({position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",insetEnd:"0",bottom:"0"},a.badge);return c.createElement(u.m$.div,(0,l.Z)((0,l.Z)({ref:r},e),{},{className:(0,h.cx)("chakra-avatar__badge",e.className),__css:n}))}));h.Ts&&(N.displayName="AvatarBadge");var R=a(9748),I=a(222),L=a(7519),T=a(1881),z=a.n(T),M=a(1875),B=a(7890),F=a(9466),U=a(2335),$=a(6496),W=a(6417);var D=function(){var e=c.useState(null),r=(0,o.Z)(e,2),a=r[0],l=r[1],d=(0,B.s0)(),u=(0,i.pm)();return c.useEffect((function(){var e=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z().get("".concat(U.Z.ks_api,"/user/info"),{headers:{Authorization:"Bearer ".concat((0,L.YT)())}});case 3:r=e.sent,a=r.data,l(a.user),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,W.jsx)(W.Fragment,{children:!a&&(0,W.jsx)(M.Z,{})||(0,W.jsxs)(s.xu,{w:"100%",children:[(0,W.jsx)(I.D,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u2013 KinoSearch"}),(0,W.jsxs)(s.Kq,{direction:"row",w:"100%",justifyContent:"space-between",children:[(0,W.jsx)(s.xu,{}),(0,W.jsx)(s.rU,{color:"brand.500",_hover:{textDecoration:"none",color:"brand.600"},onClick:function(){(0,L.RD)(),window.location.href="/"},children:"\u0412\u044b\u0439\u0442\u0438"})]}),(0,W.jsx)(s.M5,{children:(0,W.jsxs)(s.W2,{paddingTop:10,maxW:["full","sm"],children:[(0,W.jsx)(s.M5,{children:(0,W.jsxs)(s.Kq,{direction:"column",spacing:"10px",children:[(0,W.jsx)(A,{bg:"brand.500",w:"200px",h:"200px"}),(0,W.jsx)(s.M5,{children:(0,W.jsx)(s.xv,{fontSize:"lg",fontWeight:"bold",children:a.email})}),(0,W.jsx)(s.M5,{children:(0,W.jsx)(R.zx,{colorScheme:"brand",size:"sm",variant:"outline",as:F.rU,to:"/settings/edit",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})})]})}),(0,W.jsx)(s.M5,{paddingTop:5,children:(0,W.jsx)(R.zx,{colorScheme:"brand",size:"md",onClick:function(){(0,$.UZ)(),u({title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043e\u0447\u0438\u0449\u0435\u043d\u0430!",status:"success",duration:3e3,isClosable:!0,variant:"left-accent",position:"bottom-left"})},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430"})}),(0,W.jsx)(s.M5,{paddingTop:5,children:(0,W.jsx)(s.rU,{color:"brand.500",_hover:{textDecoration:"none",color:"brand.600"},as:F.rU,to:"/contacts",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})})]})})]})})}}}]);