{"version":3,"file":"static/js/889.98daad22.chunk.js","mappings":"2RAKMA,EAAK,yCAAG,WAAOC,GAAP,+FAENC,IAAAA,KAAA,UAAcC,EAAAA,EAAAA,OAAd,0BAA6CF,GAAU,KAAM,CAClEG,QAAS,CACRC,cAAc,UAAD,QAAYC,EAAAA,EAAAA,UAJf,8GAAH,sD,SCsEX,MAlEA,WACC,IAAML,GAAWM,EAAAA,EAAAA,MAAXN,OACN,EAAgCO,EAAAA,UAAwB,GAAxD,eAAOC,EAAP,KAAiBC,EAAjB,KACA,EAA0BF,EAAAA,SAAuB,IAAjD,eAAOG,EAAP,KAAcC,EAAd,KACA,EAAkCJ,EAAAA,UAAwB,GAA1D,eAAOK,EAAP,KAAkBC,EAAlB,KA+BA,OA9BAN,EAAAA,WAAgB,WACf,IAAMO,EAAK,yCAAG,kGACbL,GAAY,GACZI,GAAa,GAFA,kBAIMZ,IAAAA,IAAA,UAAaC,EAAAA,EAAAA,QAAb,kBAAqCF,GAAU,CAChEG,QAAS,CACR,YAAaD,EAAAA,EAAAA,aANH,OAUO,OANba,EAJM,QAUJC,QACPL,EAASI,EAAIE,KAAKC,QAAUH,EAAIE,KAAKE,QACrCV,GAAY,GACZW,EAAUpB,IACJqB,EAASC,SAASC,cAAc,WAC/BC,IAAM,uBACbF,SAASG,KAAKC,YAAYL,GAC1BC,SAASG,KAAKE,YAAYN,IAE1BZ,GAAY,GAnBD,gDAsBZA,GAAY,GAtBA,yBAwBZI,GAAa,GAxBD,4EAAH,qDA2BXC,GACA,GAAE,CAACd,KAEH,yBACGY,IACD,4BACC,SAAC,IAAD,CAAOF,MAAM,gBACb,SAACkB,EAAA,EAAD,SAGD,yBACGpB,IACD,UAAC,KAAD,CAAQqB,EAAE,OAAV,WACC,SAAC,IAAD,CAAOnB,MAAM,gIACb,SAAC,KAAD,4HAGD,4BACC,SAAC,IAAD,CAAOA,MAAM,6GACb,SAAC,KAAD,CAAQoB,cAAe,GAAvB,UACC,SAAC,KAAD,CAASC,KAAK,KAAKC,WAAW,MAA9B,SACEtB,OAGH,gBAAKuB,GAAG,SAAS,iBAAgBjC,UAOvC,C","sources":["hooks/History.ts","pages/Watch.tsx"],"sourcesContent":["import axios from \"axios\";\nimport { GetToken } from \"./Auth\";\nimport React from \"react\";\nimport config from \"../config\";\n\nconst Watch = async (filmId: any) => {\n\ttry {\n\t\tawait axios.post(`${config.ks_api}/history/watch/${filmId}`, null, {\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${GetToken()}`,\n\t\t\t},\n\t\t});\n\t} catch {}\n};\n\ninterface IWatch {\n\tnameRu?: string;\n\tnameEn?: string;\n\tnameOriginal?: string;\n\tposterUrl: string;\n\tposterUrlPreview: string;\n\twatchedAt: Date;\n\tkinopoiskId: number;\n}\n\nconst List = () => {\n\tconst [list, setList] = React.useState<IWatch[] | []>([]);\n\n\tconst ApiGetList = async () => {\n\t\ttry {\n\t\t\tconst { data: res } = await axios.get(`${config.ks_api}/history/list`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${GetToken()}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tsetList(res.history);\n\t\t} catch {}\n\t};\n\tApiGetList();\n\n\treturn list;\n};\n\nconst Clear = async () => {\n\ttry {\n\t\tawait axios.post(`${config.ks_api}/history/list/clear`, null, {\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${GetToken()}`,\n\t\t\t},\n\t\t});\n\t} catch {}\n};\n\nexport { Watch, List, Clear };\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport config from \"../config\";\nimport axios from \"axios\";\nimport { Title } from \"react-head-meta\";\nimport { Center, Heading } from \"@chakra-ui/react\";\nimport Loader from \"../components/Loader\";\nimport { Watch as WatchFilm } from \"../hooks/History\";\n\nfunction Watch() {\n\tlet { filmId } = useParams();\n\tconst [notFound, setNotFound] = React.useState<boolean>(false);\n\tconst [title, setTitle] = React.useState<string>(\"\");\n\tconst [isLoading, setIsLoading] = React.useState<boolean>(true);\n\tReact.useEffect(() => {\n\t\tconst check = async () => {\n\t\t\tsetNotFound(false);\n\t\t\tsetIsLoading(true);\n\t\t\ttry {\n\t\t\t\tconst res = await axios.get(`${config.api_url}/films/${filmId}`, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"X-API-KEY\": config.api_token,\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tsetTitle(res.data.nameRu || res.data.nameEn);\n\t\t\t\t\tsetNotFound(false);\n\t\t\t\t\tWatchFilm(filmId);\n\t\t\t\t\tconst script = document.createElement(\"script\");\n\t\t\t\t\tscript.src = \"/kinosearch/watch.js\";\n\t\t\t\t\tdocument.body.appendChild(script);\n\t\t\t\t\tdocument.body.removeChild(script);\n\t\t\t\t} else {\n\t\t\t\t\tsetNotFound(true);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetNotFound(true);\n\t\t\t} finally {\n\t\t\t\tsetIsLoading(false);\n\t\t\t}\n\t\t};\n\t\tcheck();\n\t}, [filmId]);\n\treturn (\n\t\t<div>\n\t\t\t{(isLoading && (\n\t\t\t\t<div>\n\t\t\t\t\t<Title title=\"KinoSearch\" />\n\t\t\t\t\t<Loader />\n\t\t\t\t</div>\n\t\t\t)) || (\n\t\t\t\t<div>\n\t\t\t\t\t{(notFound && (\n\t\t\t\t\t\t<Center h=\"80vh\">\n\t\t\t\t\t\t\t<Title title=\"Страница не найдена – KinoSearch\" />\n\t\t\t\t\t\t\t<Heading>Страница не найдена</Heading>\n\t\t\t\t\t\t</Center>\n\t\t\t\t\t)) || (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Title title=\"Просмотр фильма – KinoSearch\" />\n\t\t\t\t\t\t\t<Center paddingBottom={10}>\n\t\t\t\t\t\t\t\t<Heading size=\"xl\" fontWeight=\"800\">\n\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t</Heading>\n\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t\t<div id=\"yohoho\" data-kinopoisk={filmId} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default Watch;\n"],"names":["Watch","filmId","axios","config","headers","Authorization","GetToken","useParams","React","notFound","setNotFound","title","setTitle","isLoading","setIsLoading","check","res","status","data","nameRu","nameEn","WatchFilm","script","document","createElement","src","body","appendChild","removeChild","Loader","h","paddingBottom","size","fontWeight","id"],"sourceRoot":""}