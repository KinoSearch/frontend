"use strict";(self.webpackChunkkinosearch_v2=self.webpackChunkkinosearch_v2||[]).push([[263],{730:function(e,r,n){n.d(r,{Z:function(){return s}});n(2791);var t=n(9712),a=n(3504),o=n(7087),i=(n(9713),n(184));var s=function(e){var r=e.film,n=e.isSearch;return(0,i.jsx)(t.xu,{minW:n?"full":"140px",w:n?"full":"140px",maxW:n?"full":"140px",children:(0,i.jsx)(t.xu,{as:a.rU,to:"/film/".concat(r.kinopoiskId||r.filmId),children:(0,i.jsxs)(t.Kq,{direction:"column",spacing:"10px",children:[(0,i.jsx)(o.LazyLoadImage,{src:r.posterUrl,width:n?"auto":"140px",height:n?"auto":"210px",className:"poster_image",effect:"blur"}),(0,i.jsx)(t.X6,{size:"sm",maxW:n?"full":"140px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:n?"normal":"nowrap",children:r.nameRu||r.nameEn||r.nameOriginal})]})})})}},7357:function(e,r,n){n.r(r),n.d(r,{default:function(){return N}});var t=n(4165),a=n(5861),o=n(9439),i=n(2791),s=n(8576),l=n(9712),c=n(1413),u=n(4925),d=n(3544),p=n(7697),f=n(1197),g=["htmlWidth","htmlHeight","alt"],h=["fallbackSrc","fallback","src","srcSet","align","fit","loading","ignoreFallback","crossOrigin","fallbackStrategy","referrerPolicy"];var m=(0,d.Gp)((function(e,r){var n=e.htmlWidth,t=e.htmlHeight,a=e.alt,o=(0,u.Z)(e,g);return i.createElement("img",(0,c.Z)({width:n,height:t,ref:r,alt:a},o))}));p.Ts&&(m.displayName="NativeImage");var v=(0,d.Gp)((function(e,r){var n=e.fallbackSrc,t=e.fallback,a=e.src,s=e.srcSet,l=e.align,g=e.fit,v=e.loading,x=e.ignoreFallback,w=e.crossOrigin,b=e.fallbackStrategy,Z=void 0===b?"beforeLoadOrError":b,k=e.referrerPolicy,j=(0,u.Z)(e,h),C=null!=v||x||!(void 0!==n||void 0!==t),E=function(e){var r=e.loading,n=e.src,t=e.srcSet,a=e.onLoad,s=e.onError,l=e.crossOrigin,c=e.sizes,u=e.ignoreFallback,d=(0,i.useState)("pending"),p=(0,o.Z)(d,2),g=p[0],h=p[1];(0,i.useEffect)((function(){h(n?"loading":"pending")}),[n]);var m=(0,i.useRef)(),v=(0,i.useCallback)((function(){if(n){x();var e=new Image;e.src=n,l&&(e.crossOrigin=l),t&&(e.srcset=t),c&&(e.sizes=c),r&&(e.loading=r),e.onload=function(e){x(),h("loaded"),null==a||a(e)},e.onerror=function(e){x(),h("failed"),null==s||s(e)},m.current=e}}),[n,l,t,c,a,s,r]),x=function(){m.current&&(m.current.onload=null,m.current.onerror=null,m.current=null)};return(0,f.Gw)((function(){if(!u)return"loading"===g&&v(),function(){x()}}),[g,v,u]),u?"loaded":g}((0,c.Z)((0,c.Z)({},e),{},{ignoreFallback:C})),O=function(e,r){return"loaded"!==e&&"beforeLoadOrError"===r||"failed"===e&&"onError"===r}(E,Z),S=(0,c.Z)({ref:r,objectFit:g,objectPosition:l},C?j:(0,p.CE)(j,["onError","onLoad"]));return O?t||i.createElement(d.m$.img,(0,c.Z)({as:m,className:"chakra-image__placeholder",src:n},S)):i.createElement(d.m$.img,(0,c.Z)({as:m,src:a,srcSet:s,crossOrigin:w,loading:v,referrerPolicy:k,className:"chakra-image"},S))}));(0,d.Gp)((function(e,r){return i.createElement(d.m$.img,(0,c.Z)({ref:r,as:m,className:"chakra-image"},e))}));p.Ts&&(v.displayName="Image");var x=n(4942),w=n(3596),b=n(7819),Z=n(3803),k=n(2778),j=n(3395),C=n(1856),E=n(9642),O=["openDelay","closeDelay","closeOnClick","closeOnMouseDown","closeOnEsc","onOpen","onClose","placement","id","isOpen","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","direction"],S=["children","label","shouldWrapChildren","aria-label","hasArrow","bg","portalProps","background","backgroundColor","bgColor"],y={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}};var _=(0,d.m$)(j.E.div),P=(0,d.Gp)((function(e,r){var n,t,a=(0,d.mq)("Tooltip",e),o=(0,Z.Lr)(e),s=(0,d.Fg)(),l=o.children,g=o.label,h=o.shouldWrapChildren,m=o["aria-label"],v=o.hasArrow,j=o.bg,P=o.portalProps,I=o.background,z=o.backgroundColor,T=o.bgColor,F=(0,u.Z)(o,S),K=null!==(n=null!==(t=null!==I&&void 0!==I?I:z)&&void 0!==t?t:j)&&void 0!==n?n:T;K&&(a.bg=K,a[w.j.arrowBg.var]=(0,p.K1)(s,"colors",K));var D,q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.openDelay,n=void 0===r?0:r,t=e.closeDelay,a=void 0===t?0:t,o=e.closeOnClick,s=void 0===o||o,l=e.closeOnMouseDown,d=e.closeOnEsc,g=void 0===d||d,h=e.onOpen,m=e.onClose,v=e.placement,b=e.id,Z=e.isOpen,k=e.defaultIsOpen,j=e.arrowSize,C=void 0===j?10:j,S=e.arrowShadowColor,y=e.arrowPadding,_=e.modifiers,P=e.isDisabled,I=e.gutter,z=e.offset,T=e.direction,F=(0,u.Z)(e,O),K=(0,f.qY)({isOpen:Z,defaultIsOpen:k,onOpen:h,onClose:m}),D=K.isOpen,q=K.onOpen,R=K.onClose,A=(0,w.D)({enabled:D,placement:v,arrowPadding:y,modifiers:_,gutter:I,offset:z,direction:T}),W=A.referenceRef,X=A.getPopperProps,M=A.getArrowInnerProps,N=A.getArrowProps,$=(0,f.Me)(b,"tooltip"),L=(0,i.useRef)(null),Y=(0,i.useRef)(),B=(0,i.useRef)(),U=(0,i.useCallback)((function(){P||Y.current||(Y.current=window.setTimeout(q,n))}),[P,q,n]),G=(0,i.useCallback)((function(){Y.current&&(clearTimeout(Y.current),Y.current=void 0),B.current=window.setTimeout(R,a)}),[a,R]),H=(0,i.useCallback)((function(){D&&s&&G()}),[s,G,D]),J=(0,i.useCallback)((function(){D&&l&&G()}),[l,G,D]),Q=(0,i.useCallback)((function(e){D&&"Escape"===e.key&&G()}),[D,G]);(0,f.OR)("keydown",g?Q:void 0),(0,i.useEffect)((function(){return function(){clearTimeout(Y.current),clearTimeout(B.current)}}),[]),(0,f.OR)("mouseleave",G,(function(){return L.current}));var V=(0,i.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.Z)((0,c.Z)({},e),{},{ref:(0,E.lq)(L,r,W),onMouseEnter:(0,p.v0)(e.onMouseEnter,U),onClick:(0,p.v0)(e.onClick,H),onMouseDown:(0,p.v0)(e.onMouseDown,J),onFocus:(0,p.v0)(e.onFocus,U),onBlur:(0,p.v0)(e.onBlur,G),"aria-describedby":D?$:void 0})}),[U,G,J,D,$,H,W]),ee=(0,i.useCallback)((function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return X((0,c.Z)((0,c.Z)({},r),{},{style:(0,c.Z)((0,c.Z)({},r.style),{},(e={},(0,x.Z)(e,w.j.arrowSize.var,C?(0,p.px)(C):void 0),(0,x.Z)(e,w.j.arrowShadowColor.var,S),e))}),n)}),[X,C,S]),re=(0,i.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.Z)((0,c.Z)((0,c.Z)({ref:r},F),e),{},{id:$,role:"tooltip",style:(0,c.Z)((0,c.Z)({},e.style),{},{position:"relative",transformOrigin:w.j.transformOrigin.varRef})})}),[F,$]);return{isOpen:D,show:U,hide:G,getTriggerProps:V,getTooltipProps:re,getTooltipPositionerProps:ee,getArrowProps:N,getArrowInnerProps:M}}((0,c.Z)((0,c.Z)({},F),{},{direction:s.direction}));if((0,p.HD)(l)||h)D=i.createElement(d.m$.span,(0,c.Z)({tabIndex:0},q.getTriggerProps()),l);else{var R=i.Children.only(l);D=(0,i.cloneElement)(R,q.getTriggerProps(R.props,R.ref))}var A=!!m,W=q.getTooltipProps({},r),X=A?(0,p.CE)(W,["role","id"]):W,M=(0,p.ei)(W,["role","id"]);return g?i.createElement(i.Fragment,null,D,i.createElement(C.M,null,q.isOpen&&i.createElement(b.h_,(0,c.Z)({},P),i.createElement(d.m$.div,(0,c.Z)((0,c.Z)({},q.getTooltipPositionerProps()),{},{__css:{zIndex:a.zIndex,pointerEvents:"none"}}),i.createElement(_,(0,c.Z)((0,c.Z)({variants:y},X),{},{initial:"exit",animate:"enter",exit:"exit",__css:a}),g,A&&i.createElement(k.TX,(0,c.Z)({},M),m),v&&i.createElement(d.m$.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper"},i.createElement(d.m$.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:a.bg}}))))))):i.createElement(i.Fragment,null,l)}));p.Ts&&(P.displayName="Tooltip");var I=n(5777),z=n(6871),T=n(3504),F=n(4569),K=n.n(F),D=n(9478),q=n(1605),R=n(730),A=n(4370),W=n(8699),X=n(9555),M=n(184);var N=function(){var e=(0,s.pm)(),r=(0,z.UO)().filmId,n=i.useState(!1),c=(0,o.Z)(n,2),u=c[0],d=c[1],p=i.useState(!0),f=(0,o.Z)(p,2),g=f[0],h=f[1],m=i.useState(null),x=(0,o.Z)(m,2),w=x[0],b=x[1],Z=i.useState(!1),k=(0,o.Z)(Z,2),j=k[0],C=k[1],E=(0,X.uF)(),O=i.useState([]),S=(0,o.Z)(O,2),y=S[0],_=S[1],F=i.useState([]),N=(0,o.Z)(F,2),$=N[0],L=N[1];i.useEffect((function(){var e=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K().get("".concat(D.Z.ks_api,"/favorite/check?filmId=").concat(r),{headers:{Authorization:"Bearer ".concat((0,X.YT)())}});case 3:n=e.sent,n.data.favorite?C(!0):C(!1),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _([]),L([]),h(!0),e.prev=3,e.next=6,K().get("".concat(D.Z.api_url,"/films/").concat(r),{headers:{"X-API-KEY":D.Z.api_token}});case 6:n=e.sent,a=n.data,b(a),d(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),d(!0);case 15:return e.prev=15,h(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(){return e.apply(this,arguments)}}();if(n(),!u){var o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,a,o,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K().get("".concat(D.Z.api_url,"/films/").concat(r,"/similars"),{headers:{"X-API-KEY":D.Z.api_token}});case 3:n=e.sent,a=n.data,_(a.items),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,e.next=13,K().get("".concat(D.Z.sequels_and_prequels_url,"/films/").concat(r,"/sequels_and_prequels"),{headers:{"X-API-KEY":D.Z.api_token}});case 13:o=e.sent,i=o.data,L(i),e.next=20;break;case 18:e.prev=18,e.t1=e.catch(10);case 20:case"end":return e.stop()}}),e,null,[[0,8],[10,18]])})));return function(){return e.apply(this,arguments)}}();o()}e()}),[r]);var Y=function(){var n=(0,a.Z)((0,t.Z)().mark((function n(){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!j){n.next=7;break}return C(!1),n.next=5,K().post("".concat(D.Z.ks_api,"/favorite/remove"),{filmId:r},{headers:{Authorization:"Bearer ".concat((0,X.YT)())}});case 5:n.next=10;break;case 7:return C(!0),n.next=10,K().post("".concat(D.Z.ks_api,"/favorite/add"),{filmId:r},{headers:{Authorization:"Bearer ".concat((0,X.YT)())}});case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),e({title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",description:"".concat(n.t0),status:"error",duration:3e3,isClosable:!0,variant:"left-accent",position:"bottom-left"});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(){return n.apply(this,arguments)}}();return(0,M.jsx)(M.Fragment,{children:g&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(A.D,{title:"KinoSearch"}),(0,M.jsx)(q.Z,{})]})||(0,M.jsx)(M.Fragment,{children:u&&(0,M.jsxs)(l.M5,{h:"80vh",children:[(0,M.jsx)(A.D,{title:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u2013 KinoSearch"}),(0,M.jsx)(l.X6,{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]})||(0,M.jsxs)(l.Kq,{direction:"column",spacing:10,children:[(0,M.jsx)(A.D,{title:"".concat(w.nameRu||w.nameEn||w.nameOriginal," \u2013 KinoSearch")}),(0,M.jsxs)(l.Kq,{spacing:"50px",direction:["column","row"],paddingRight:[0,10],children:[(0,M.jsx)(v,{src:w.posterUrl,w:["auto","350px"],borderRadius:"20px"}),(0,M.jsxs)(l.Kq,{direction:"column",spacing:"20px",w:"100%",children:[(0,M.jsxs)(l.Kq,{direction:"row",justifyContent:"space-between",spacing:"15px",children:[(0,M.jsx)(l.X6,{size:"xl",fontWeight:"800",children:w.nameRu||w.nameEn||w.nameOriginal}),w.ratingKinopoisk||w.ratingImdb||w.ratingFilmCritics?(0,M.jsx)(P,{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u0444\u0438\u043b\u044c\u043c\u0430",hasArrow:!0,bg:"#252525",color:"white",placement:"left",children:(0,M.jsx)(l.M5,{children:(0,M.jsx)(l.Ct,{colorScheme:"green",variant:"subtle",fontSize:"lg",children:w.ratingKinopoisk||w.ratingImdb||w.ratingFilmCritics})})}):null]}),(0,M.jsx)(l.xv,{fontWeight:"500",fontSize:"lg",children:w.shortDescription||w.slogan||w.description}),(0,M.jsxs)(l.Kq,{direction:"row",spacing:"10px",children:[(0,M.jsx)(I.zx,{colorScheme:"brand",variant:"outline",size:"lg",borderRadius:"30px",w:"100%",as:T.rU,to:"/watch/".concat(r),children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c"}),E&&(0,M.jsx)(I.hU,{"aria-label":"Favorite",color:j?"brand.500":"white",icon:(0,M.jsx)(W.r7,{w:6,h:6}),size:"lg",onClick:Y})]}),(0,M.jsx)(l.X6,{size:"xl",fontWeight:"800",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0444\u0438\u043b\u044c\u043c\u0435"}),(0,M.jsxs)(l.xv,{fontWeight:"500",fontSize:"lg",children:["\u0413\u043e\u0434 \u0432\u044b\u043f\u0443\u0441\u043a\u0430: ",w.year||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",(0,M.jsx)("br",{}),"\u0421\u0442\u0440\u0430\u043d\u0430: ",w.countries[0].country||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",(0,M.jsx)("br",{}),"\u0416\u0430\u043d\u0440: ",w.genres[0].genre||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"]})]})]}),0!==$.length&&(0,M.jsxs)(l.xu,{children:[(0,M.jsxs)(l.X6,{size:"md",fontWeight:"700",children:["\u0421\u0438\u043a\u0432\u0435\u043b\u044b \u0438 \u043f\u0440\u0438\u043a\u0432\u0435\u043b\u044b"," ",(0,M.jsx)(l.Ct,{ml:"1",fontSize:"md",children:$.length})]}),(0,M.jsx)(l.xu,{paddingTop:5,children:(0,M.jsx)(l.Kq,{direction:"row",overflow:"auto",overflowX:"auto",spacing:"20px",children:$.map((function(e){return(0,M.jsx)(R.Z,{film:e})}))})})]}),0!==y.length&&(0,M.jsxs)(l.xu,{children:[(0,M.jsxs)(l.X6,{size:"md",fontWeight:"700",children:["\u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u0441\u044f \u044d\u0442\u043e\u0442 \u0444\u0438\u043b\u044c\u043c"," ",(0,M.jsx)(l.Ct,{ml:"1",fontSize:"md",children:y.length})]}),(0,M.jsx)(l.xu,{paddingTop:5,children:(0,M.jsx)(l.Kq,{direction:"row",overflow:"auto",overflowX:"auto",spacing:"20px",children:y.map((function(e){return(0,M.jsx)(R.Z,{film:e})}))})})]})]})})})}}}]);
//# sourceMappingURL=263.fdd45dca.chunk.js.map