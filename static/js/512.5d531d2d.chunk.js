"use strict";(self.webpackChunkkinosearch_v2=self.webpackChunkkinosearch_v2||[]).push([[512],{9512:function(e,r,s){s.r(r);var t=s(1413),n=s(7762),a=s(4165),o=s(5861),c=s(9439),i=s(7313),d=s(4390),l=s(3964),u=s(720),p=s(3068),h=s(9748),f=s(5627),w=s(2335),x=s(1881),m=s.n(x),v=s(7890),j=s(1875),b=s(7519),_=s(6417);r.default=function(){var e=(0,d.pm)(),r=i.useState(null),s=(0,c.Z)(r,2),x=s[0],g=s[1],Z=(0,v.s0)();i.useEffect((function(){var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().get("".concat(w.Z.ks_api,"/user/info"),{headers:{Authorization:"Bearer ".concat((0,b.YT)())}});case 3:r=e.sent,s=r.data,g(s.user),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Z("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var k=i.useState(!1),y=(0,c.Z)(k,2),I=y[0],C=y[1],S=(0,f.cI)(),q=S.register,F=S.handleSubmit,z=S.formState.errors,B=S.setError,T=F(function(){var r=(0,o.Z)((0,a.Z)().mark((function r(s){var t,o,c,i,d;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,C(!0),r.next=4,m().post("".concat(w.Z.ks_api,"/user/change_password"),s,{headers:{Authorization:"Bearer ".concat((0,b.YT)())}});case 4:if(t=r.sent,(o=t.data).errors){c=(0,n.Z)(o.errors);try{for(c.s();!(i=c.n()).done;)"auth"===(d=i.value).rule&&B("current_password",{type:"custom",message:d.message})}catch(a){c.e(a)}finally{c.f()}}else e({title:"\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d",status:"success",duration:3e3,isClosable:!0,variant:"left-accent",position:"bottom-left"}),Z("/settings/edit");r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),e({title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(r.t0),status:"error",duration:3e3,isClosable:!0,variant:"left-accent",position:"bottom-left"});case 12:return r.prev=12,C(!1),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,9,12,15]])})));return function(e){return r.apply(this,arguments)}}());return(0,_.jsx)(_.Fragment,{children:!x&&(0,_.jsx)(j.Z,{})||(0,_.jsx)(l.xu,{w:"100%",paddingTop:[10,0],children:(0,_.jsx)(l.M5,{children:(0,_.jsx)(l.W2,{maxW:["full","sm"],children:(0,_.jsx)("form",{onSubmit:T,children:(0,_.jsxs)(l.Kq,{direction:"column",spacing:5,children:[(0,_.jsx)(l.M5,{children:(0,_.jsx)(l.X6,{children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})}),(0,_.jsxs)(u.NI,{isInvalid:!!z.current_password,children:[(0,_.jsx)(p.II,(0,t.Z)({placeholder:"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",borderColor:"#929292",type:"password",isDisabled:I,focusBorderColor:"brand.500",_placeholder:{color:"white"}},q("current_password",{required:!0}))),z.current_password&&(0,_.jsx)(u.J1,{children:"required"===z.current_password.type&&(0,_.jsx)(_.Fragment,{children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"})||(0,_.jsx)(_.Fragment,{children:z.current_password.message})})]}),(0,_.jsxs)(u.NI,{isInvalid:!!z.new_password,children:[(0,_.jsx)(p.II,(0,t.Z)({placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",borderColor:"#929292",isDisabled:I,type:"password",focusBorderColor:"brand.500",_placeholder:{color:"white"}},q("new_password",{required:!0}))),z.new_password&&(0,_.jsx)(u.J1,{children:"required"===z.new_password.type&&(0,_.jsx)(_.Fragment,{children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"})||(0,_.jsx)(_.Fragment,{children:z.new_password.message})})]}),(0,_.jsx)(h.zx,{w:"100%",isLoading:I,type:"submit",colorScheme:"brand",size:"md",children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})})})})})})}}}]);