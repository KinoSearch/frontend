"use strict";(self.webpackChunkkinosearch_v2=self.webpackChunkkinosearch_v2||[]).push([[728],{7423:function(e,n,t){t.d(n,{Z:function(){return o}});t(7313);var a=t(3964),r=t(9466),i=t(8831),s=(t(6804),t(6417));var o=function(e){var n=e.film,t=e.isSearch;return(0,s.jsx)(a.xu,{minW:t?"full":"140px",w:t?"full":"140px",maxW:t?"full":"140px",children:(0,s.jsx)(a.xu,{as:r.rU,to:"/film/".concat(n.kinopoiskId||n.filmId),children:(0,s.jsxs)(a.Kq,{direction:"column",spacing:"10px",children:[(0,s.jsx)(i.LazyLoadImage,{src:n.posterUrl,width:t?"auto":"140px",height:t?"auto":"210px",className:"poster_image",effect:"blur"}),(0,s.jsx)(a.X6,{size:"sm",maxW:t?"full":"140px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:t?"normal":"nowrap",children:n.nameRu||n.nameEn||n.nameOriginal})]})})})}},7303:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var a=t(4165),r=t(5861),i=t(9439),s=t(7313),o=t(3964),c=t(9748),l=t(1413),u=t(4942),d=t(4925),f=t(87),h=t(416),x=t(139),m=t(7872),v=t(8057),p=t(5561),Z=t(4959),b=["defaultIndex","onChange","index","isManual","isLazy","lazyBehavior","orientation","direction"],y=["isDisabled","isFocusable"],j=["isSelected","id","children"],g=["children","className"],w=["htmlProps","descendants"],_=(0,p.n)(),T=(0,i.Z)(_,4),z=T[0],S=T[1],k=T[2],I=T[3];var N=(0,f.kr)({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"}),E=(0,i.Z)(N,2),M=E[0],C=E[1];function F(e,n){return"".concat(e,"--tab-").concat(n)}function L(e,n){return"".concat(e,"--tabpanel-").concat(n)}var A=(0,f.kr)({name:"TabsStylesContext",errorMessage:"useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Tabs />\" "}),B=(0,i.Z)(A,2),D=B[0],$=B[1],G=(0,h.Gp)((function(e,n){var t=(0,h.jC)("Tabs",e),a=(0,x.Lr)(e),r=a.children,o=a.className,c=function(e){var n=e.defaultIndex,t=e.onChange,a=e.index,r=e.isManual,o=e.isLazy,c=e.lazyBehavior,l=void 0===c?"unmount":c,u=e.orientation,f=void 0===u?"horizontal":u,h=e.direction,x=void 0===h?"ltr":h,m=(0,d.Z)(e,b),v=(0,s.useState)(null!==n&&void 0!==n?n:0),p=(0,i.Z)(v,2),y=p[0],j=p[1],g=(0,Z.Tx)({defaultValue:null!==n&&void 0!==n?n:0,value:a,onChange:t}),w=(0,i.Z)(g,2),_=w[0],T=w[1];(0,s.useEffect)((function(){null!=a&&j(a)}),[a]);var z=k();return{id:(0,Z.Me)(e.id,"tabs"),selectedIndex:_,focusedIndex:y,setSelectedIndex:T,setFocusedIndex:j,isManual:r,isLazy:o,lazyBehavior:l,orientation:f,descendants:z,direction:x,htmlProps:m}}((0,d.Z)(a,g)),u=c.htmlProps,f=c.descendants,v=(0,d.Z)(c,w),p=(0,s.useMemo)((function(){return v}),[v]),y=(0,m.CE)(u,["isFitted"]);return s.createElement(z,{value:f},s.createElement(M,{value:p},s.createElement(D,{value:t},s.createElement(h.m$.div,(0,l.Z)((0,l.Z)({className:(0,m.cx)("chakra-tabs",o),ref:n},y),{},{__css:t.root}),r))))}));m.Ts&&(G.displayName="Tabs");var W=(0,h.Gp)((function(e,n){var t=$(),a=function(e){var n=e.isDisabled,t=e.isFocusable,a=(0,d.Z)(e,y),r=C(),i=r.setSelectedIndex,s=r.isManual,o=r.id,c=r.setFocusedIndex,u=r.selectedIndex,h=I({disabled:n&&!t}),x=h.index,p=h.register,Z=x===u,b=(0,v.h)((0,l.Z)((0,l.Z)({},a),{},{ref:(0,f.lq)(p,e.ref),isDisabled:n,isFocusable:t,onClick:(0,m.v0)(e.onClick,(function(){i(x)}))}));return(0,l.Z)((0,l.Z)({},b),{},{id:F(o,x),role:"tab",tabIndex:Z?0:-1,type:"button","aria-selected":Z,"aria-controls":L(o,x),onFocus:n?void 0:(0,m.v0)(e.onFocus,(function(){c(x),!s&&(!n||!t)&&i(x)}))})}((0,l.Z)((0,l.Z)({},e),{},{ref:n})),r=(0,l.Z)({outline:"0",display:"flex",alignItems:"center",justifyContent:"center"},t.tab);return s.createElement(h.m$.button,(0,l.Z)((0,l.Z)({},a),{},{className:(0,m.cx)("chakra-tabs__tab",e.className),__css:r}))}));m.Ts&&(W.displayName="Tab");var P=(0,h.Gp)((function(e,n){var t=function(e){var n=C(),t=n.focusedIndex,a=n.orientation,r=n.direction,i=S(),o=(0,s.useCallback)((function(e){var n,s=function(){var e=i.nextEnabled(t);e&&(0,m.T_)(e.node)},o=function(){var e=i.prevEnabled(t);e&&(0,m.T_)(e.node)},c="horizontal"===a,l="vertical"===a,d=(0,m.uh)(e),f="ltr"===r?"ArrowLeft":"ArrowRight",h="ltr"===r?"ArrowRight":"ArrowLeft",x=(n={},(0,u.Z)(n,f,(function(){return c&&o()})),(0,u.Z)(n,h,(function(){return c&&s()})),(0,u.Z)(n,"ArrowDown",(function(){return l&&s()})),(0,u.Z)(n,"ArrowUp",(function(){return l&&o()})),(0,u.Z)(n,"Home",(function(){var e=i.firstEnabled();e&&(0,m.T_)(e.node)})),(0,u.Z)(n,"End",(function(){var e=i.lastEnabled();e&&(0,m.T_)(e.node)})),n)[d];x&&(e.preventDefault(),x(e))}),[i,t,a,r]);return(0,l.Z)((0,l.Z)({},e),{},{role:"tablist","aria-orientation":a,onKeyDown:(0,m.v0)(e.onKeyDown,o)})}((0,l.Z)((0,l.Z)({},e),{},{ref:n})),a=$(),r=(0,l.Z)({display:"flex"},a.tablist);return s.createElement(h.m$.div,(0,l.Z)((0,l.Z)({},t),{},{className:(0,m.cx)("chakra-tabs__tablist",e.className),__css:r}))}));m.Ts&&(P.displayName="TabList");var R=(0,h.Gp)((function(e,n){var t=function(e){var n=e.isSelected,t=e.id,a=e.children,r=(0,d.Z)(e,j),i=C(),o=i.isLazy,c=i.lazyBehavior,u=(0,s.useRef)(!1);n&&(u.current=!0);var f=(0,m.VI)({hasBeenSelected:u.current,isSelected:n,isLazy:o,lazyBehavior:c});return(0,l.Z)((0,l.Z)({tabIndex:0},r),{},{children:f?a:null,role:"tabpanel",hidden:!n,id:t})}((0,l.Z)((0,l.Z)({},e),{},{ref:n})),a=$();return s.createElement(h.m$.div,(0,l.Z)((0,l.Z)({outline:"0"},t),{},{className:(0,m.cx)("chakra-tabs__tab-panel",e.className),__css:a.tabpanel}))}));m.Ts&&(R.displayName="TabPanel");var q=(0,h.Gp)((function(e,n){var t=function(e){var n=C(),t=n.id,a=n.selectedIndex,r=(0,f.WR)(e.children).map((function(e,n){return(0,s.cloneElement)(e,{isSelected:n===a,id:L(t,n),"aria-labelledby":F(t,n)})}));return(0,l.Z)((0,l.Z)({},e),{},{children:r})}(e),a=$();return s.createElement(h.m$.div,(0,l.Z)((0,l.Z)({},t),{},{width:"100%",ref:n,className:(0,m.cx)("chakra-tabs__tab-panels",e.className),__css:a.tabpanels}))}));m.Ts&&(q.displayName="TabPanels");var K=(0,h.Gp)((function(e,n){var t=function(){var e=C(),n=S(),t=e.selectedIndex,a=e.orientation,r="horizontal"===a,o="vertical"===a,c=(0,s.useState)((function(){return r?{left:0,width:0}:o?{top:0,height:0}:void 0})),u=(0,i.Z)(c,2),d=u[0],f=u[1],h=(0,s.useState)(!1),x=(0,i.Z)(h,2),v=x[0],p=x[1];return(0,Z.Gw)((function(){if(!(0,m.o8)(t)){var e=n.item(t);if(!(0,m.o8)(e)){r&&f({left:e.node.offsetLeft,width:e.node.offsetWidth}),o&&f({top:e.node.offsetTop,height:e.node.offsetHeight});var a=requestAnimationFrame((function(){p(!0)}));return function(){a&&cancelAnimationFrame(a)}}}}),[t,r,o,n]),(0,l.Z)({position:"absolute",transitionProperty:"left, right, top, bottom, height, width",transitionDuration:v?"200ms":"0ms",transitionTimingFunction:"cubic-bezier(0, 0, 0.2, 1)"},d)}(),a=(0,l.Z)((0,l.Z)({},e.style),t),r=$();return s.createElement(h.m$.div,(0,l.Z)((0,l.Z)({ref:n},e),{},{className:(0,m.cx)("chakra-tabs__tab-indicator",e.className),style:a,__css:r.indicator}))}));m.Ts&&(K.displayName="TabIndicator");var U=t(1101),H=t(1881),O=t.n(H),V=t(2335),X=t(7519),Y=t(7423),J=t(9466),Q=t(6417);var ee=function(){var e=(0,X.uF)(),n=s.useState(!0),t=(0,i.Z)(n,2),l=t[0],u=t[1],d=s.useState(!0),f=(0,i.Z)(d,2),h=f[0],x=f[1],m=s.useState([]),v=(0,i.Z)(m,2),p=v[0],Z=v[1],b=s.useState([]),y=(0,i.Z)(b,2),j=y[0],g=y[1];s.useEffect((function(){x(!0),u(!0);var e=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O().get("".concat(V.Z.ks_api,"/history/list"),{headers:{Authorization:"Bearer ".concat((0,X.YT)())}});case 3:n=e.sent,t=n.data,g(t.history);case 6:return e.prev=6,u(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O().get("".concat(V.Z.ks_api,"/favorite/list"),{headers:{Authorization:"Bearer ".concat((0,X.YT)())}});case 3:n=e.sent,t=n.data,Z(t.favorite);case 6:return e.prev=6,x(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})));return function(){return e.apply(this,arguments)}}();e(),n()}),[]);var w=function(n){var t=n.type;return(0,Q.jsx)(o.M5,{children:(0,Q.jsxs)(o.Kq,{direction:"column",spacing:"20px",children:[(0,Q.jsx)(o.M5,{children:(0,Q.jsx)(o.X6,{size:["sm","lg"],children:"\u0422\u0443\u0442 \u043f\u043e\u043a\u0430 \u043f\u0443\u0441\u0442\u043e"})}),(0,Q.jsx)(o.M5,{color:"gray.400",children:"favorite"===t&&(0,Q.jsx)(o.xv,{fontSize:["10px","md"],children:"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u0444\u0438\u043b\u044c\u043c\u044b \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435, \u0438 \u043e\u043d\u0438 \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0442\u0443\u0442"})||(0,Q.jsx)(o.xv,{fontSize:["10px","md"],children:"\u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0444\u0438\u043b\u044c\u043c\u044b, \u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0442\u0443\u0442"})}),!e&&(0,Q.jsx)(o.M5,{w:["100%","auto"],children:(0,Q.jsx)(c.zx,{w:["100%","auto"],colorScheme:"brand",size:"md",as:J.rU,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})},_=function(e){var n=e.list;return(0,Q.jsx)(o.MI,{columns:[2,3,4,5],spacing:"20px",children:n.map((function(e){return(0,Q.jsx)(Y.Z,{film:e})}))})};return(0,Q.jsx)(o.W2,{maxW:"4xl",paddingTop:10,children:(0,Q.jsxs)(G,{variant:"soft-rounded",colorScheme:"brand",children:[(0,Q.jsx)(o.M5,{children:(0,Q.jsxs)(P,{children:[(0,Q.jsx)(W,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),(0,Q.jsx)(W,{children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"})]})}),(0,Q.jsxs)(q,{paddingTop:10,children:[(0,Q.jsx)(R,{children:h&&(0,Q.jsx)(o.M5,{children:(0,Q.jsx)(U.$,{color:"brand.500",size:"xl"})})||(0,Q.jsx)(Q.Fragment,{children:0===p.length&&(0,Q.jsx)(w,{type:"favorite"})||(0,Q.jsx)(_,{list:p})})}),(0,Q.jsx)(R,{children:l&&(0,Q.jsx)(o.M5,{children:(0,Q.jsx)(U.$,{color:"brand.500",size:"xl"})})||(0,Q.jsx)(Q.Fragment,{children:0===j.length&&(0,Q.jsx)(w,{type:"history"})||(0,Q.jsx)(_,{list:j})})})]})]})})}}}]);