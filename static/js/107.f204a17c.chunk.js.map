{"version":3,"file":"static/js/107.f204a17c.chunk.js","mappings":"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","sources":["pages/Login.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n\tBox,\n\tContainer,\n\tCenter,\n\tFormControl,\n\tFormErrorMessage,\n\tButton,\n\tInput,\n\tStack,\n\tHeading,\n\tuseToast,\n\tLink,\n\tText,\n} from \"@chakra-ui/react\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport config from \"../config\";\nimport { SetToken } from \"../hooks/Auth\";\nimport { Link as RLink } from \"react-router-dom\";\n\nfunction Register() {\n\tconst toast = useToast();\n\tconst [isLoading, setIsLoading] = React.useState<boolean>(false);\n\ttype FormData = {\n\t\temail: string;\n\t\tpassword: string;\n\t};\n\n\tconst {\n\t\tregister,\n\t\thandleSubmit,\n\t\tformState: { errors },\n\t\tsetError,\n\t} = useForm<FormData>();\n\n\tconst onSubmit = handleSubmit(async (data) => {\n\t\tsetIsLoading(true);\n\t\ttry {\n\t\t\tlet error: boolean = false;\n\t\t\tif (\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\t!/^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i.test(\n\t\t\t\t\tdata.email\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tsetError(\"email\", {\n\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\tmessage: \"Email введен некорректно\",\n\t\t\t\t});\n\n\t\t\t\terror = true;\n\t\t\t}\n\n\t\t\tif (error) return;\n\n\t\t\tconst { data: res } = await axios.post(\n\t\t\t\t`${config.ks_api}/auth/login`,\n\t\t\t\tdata\n\t\t\t);\n\n\t\t\tif (!res.errors) {\n\t\t\t\tSetToken(res.auth.token);\n\t\t\t\twindow.location.href = \"/\";\n\t\t\t} else {\n\t\t\t\tfor (const e of res.errors) {\n\t\t\t\t\tif (e.rule === \"auth\") {\n\t\t\t\t\t\tsetError(\"email\", {\n\t\t\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\t\t\tmessage: e.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetError(\"password\", {\n\t\t\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\t\t\tmessage: e.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e: any) {\n\t\t\tif (e.response.data) {\n\t\t\t\tconst res = e.response.data;\n\t\t\t\ttry {\n\t\t\t\t\tfor (const err of res.errors) {\n\t\t\t\t\t\tif (err.rule === \"auth\") {\n\t\t\t\t\t\t\tsetError(\"email\", {\n\t\t\t\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\t\t\t\tmessage: err.message,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetError(\"password\", {\n\t\t\t\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\t\t\t\tmessage: err.message,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (errr) {\n\t\t\t\t\ttoast({\n\t\t\t\t\t\ttitle: \"Произошла ошибка\",\n\t\t\t\t\t\tdescription: `${e}`,\n\t\t\t\t\t\tstatus: \"error\",\n\t\t\t\t\t\tduration: 3000,\n\t\t\t\t\t\tisClosable: true,\n\t\t\t\t\t\tvariant: \"left-accent\",\n\t\t\t\t\t\tposition: \"bottom-left\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttoast({\n\t\t\t\t\ttitle: \"Произошла ошибка\",\n\t\t\t\t\tdescription: `${e}`,\n\t\t\t\t\tstatus: \"error\",\n\t\t\t\t\tduration: 3000,\n\t\t\t\t\tisClosable: true,\n\t\t\t\t\tvariant: \"left-accent\",\n\t\t\t\t\tposition: \"bottom-left\",\n\t\t\t\t});\n\t\t\t}\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t});\n\treturn (\n\t\t<Box w=\"100%\">\n\t\t\t<Center>\n\t\t\t\t<Container maxW={[\"full\", \"sm\"]}>\n\t\t\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t\t\t<Stack direction=\"column\" spacing={5}>\n\t\t\t\t\t\t\t<Center>\n\t\t\t\t\t\t\t\t<Heading>Авторизация</Heading>\n\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t\t<FormControl isInvalid={errors.email ? true : false}>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\t\t\tborderColor=\"#929292\"\n\t\t\t\t\t\t\t\t\tfocusBorderColor=\"brand.500\"\n\t\t\t\t\t\t\t\t\t_placeholder={{ color: \"white\" }}\n\t\t\t\t\t\t\t\t\t{...register(\"email\", { required: true })}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{errors.email && (\n\t\t\t\t\t\t\t\t\t<FormErrorMessage>\n\t\t\t\t\t\t\t\t\t\t{(errors.email.type === \"required\" && (\n\t\t\t\t\t\t\t\t\t\t\t<>Укажите Email</>\n\t\t\t\t\t\t\t\t\t\t)) || <>{errors.email.message}</>}\n\t\t\t\t\t\t\t\t\t</FormErrorMessage>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormControl isInvalid={errors.password ? true : false}>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tplaceholder=\"Пароль\"\n\t\t\t\t\t\t\t\t\tborderColor=\"#929292\"\n\t\t\t\t\t\t\t\t\tfocusBorderColor=\"brand.500\"\n\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t_placeholder={{ color: \"white\" }}\n\t\t\t\t\t\t\t\t\t{...register(\"password\", { required: true })}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{errors.password && (\n\t\t\t\t\t\t\t\t\t<FormErrorMessage>\n\t\t\t\t\t\t\t\t\t\t{(errors.password.type === \"required\" && (\n\t\t\t\t\t\t\t\t\t\t\t<>Укажите пароль</>\n\t\t\t\t\t\t\t\t\t\t)) || <>{errors.password.message}</>}\n\t\t\t\t\t\t\t\t\t</FormErrorMessage>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tw=\"100%\"\n\t\t\t\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tcolorScheme=\"brand\"\n\t\t\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tВойти\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Center w=\"100%\">\n\t\t\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t\t\tНет аккаунта?{\" \"}\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tcolor=\"brand.500\"\n\t\t\t\t\t\t\t\t\t\t_hover={{ color: \"brand.600\", textDecoration: \"none\" }}\n\t\t\t\t\t\t\t\t\t\tas={RLink}\n\t\t\t\t\t\t\t\t\t\tto=\"/register\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tРегистрация\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</form>\n\t\t\t\t</Container>\n\t\t\t</Center>\n\t\t</Box>\n\t);\n}\n\nexport default Register;\n"],"names":["toast","useToast","React","isLoading","setIsLoading","useForm","register","handleSubmit","errors","formState","setError","onSubmit","data","error","test","email","type","message","axios","config","res","e","rule","SetToken","auth","token","window","location","href","response","err","errr","title","description","status","duration","isClosable","variant","position","w","maxW","direction","spacing","isInvalid","placeholder","borderColor","focusBorderColor","_placeholder","color","required","password","colorScheme","size","_hover","textDecoration","as","RLink","to"],"sourceRoot":""}