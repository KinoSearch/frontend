"use strict";(self.webpackChunkkinosearch_v2=self.webpackChunkkinosearch_v2||[]).push([[335],{7423:function(e,n,r){r.d(n,{Z:function(){return s}});r(7313);var t=r(3964),o=r(9466),i=r(8831),a=(r(6804),r(6417));var s=function(e){var n=e.film,r=e.isSearch;return(0,a.jsx)(t.xu,{minW:r?"full":"140px",w:r?"full":"140px",maxW:r?"full":"140px",children:(0,a.jsx)(t.xu,{as:o.rU,to:"/film/".concat(n.kinopoiskId||n.filmId),children:(0,a.jsxs)(t.Kq,{direction:"column",spacing:"10px",children:[(0,a.jsx)(i.LazyLoadImage,{src:n.posterUrl,width:r?"auto":"140px",height:r?"auto":"210px",className:"poster_image",effect:"blur"}),(0,a.jsx)(t.X6,{size:"sm",maxW:r?"full":"140px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:r?"normal":"nowrap",children:n.nameRu||n.nameEn||n.nameOriginal})]})})})}},2920:function(e,n,r){r.r(n),r.d(n,{default:function(){return F}});var t=r(4165),o=r(5861),i=r(9439),a=r(7313),s=r(4390),c=r(3964),l=r(5098),u=r(4942),d=r(1413),p=r(4925),f=r(9244),h=r(8276),v=r(416),g=r(139),x=r(7872),m=r(1563),w=r(131),Z=r(8651),b=r(4959),j=r(87),k=["openDelay","closeDelay","closeOnClick","closeOnMouseDown","closeOnEsc","onOpen","onClose","placement","id","isOpen","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","direction"],C=["children","label","shouldWrapChildren","aria-label","hasArrow","bg","portalProps","background","backgroundColor","bgColor"],E={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}};var O=(0,v.m$)(w.E.div),_=(0,v.Gp)((function(e,n){var r,t,o=(0,v.mq)("Tooltip",e),i=(0,g.Lr)(e),s=(0,v.Fg)(),c=i.children,l=i.label,w=i.shouldWrapChildren,_=i["aria-label"],y=i.hasArrow,S=i.bg,z=i.portalProps,P=i.background,I=i.backgroundColor,T=i.bgColor,K=(0,p.Z)(i,C),D=null!==(r=null!==(t=null!==P&&void 0!==P?P:I)&&void 0!==t?t:S)&&void 0!==r?r:T;D&&(o.bg=D,o[f.j.arrowBg.var]=(0,x.K1)(s,"colors",D));var q,A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.openDelay,r=void 0===n?0:n,t=e.closeDelay,o=void 0===t?0:t,i=e.closeOnClick,s=void 0===i||i,c=e.closeOnMouseDown,l=e.closeOnEsc,h=void 0===l||l,v=e.onOpen,g=e.onClose,m=e.placement,w=e.id,Z=e.isOpen,C=e.defaultIsOpen,E=e.arrowSize,O=void 0===E?10:E,_=e.arrowShadowColor,y=e.arrowPadding,S=e.modifiers,z=e.isDisabled,P=e.gutter,I=e.offset,T=e.direction,K=(0,p.Z)(e,k),D=(0,b.qY)({isOpen:Z,defaultIsOpen:C,onOpen:v,onClose:g}),q=D.isOpen,A=D.onOpen,R=D.onClose,W=(0,f.D)({enabled:q,placement:m,arrowPadding:y,modifiers:S,gutter:P,offset:I,direction:T}),F=W.referenceRef,X=W.getPopperProps,M=W.getArrowInnerProps,Y=W.getArrowProps,B=(0,b.Me)(w,"tooltip"),U=(0,a.useRef)(null),L=(0,a.useRef)(),$=(0,a.useRef)(),N=(0,a.useCallback)((function(){z||L.current||(L.current=window.setTimeout(A,r))}),[z,A,r]),G=(0,a.useCallback)((function(){L.current&&(clearTimeout(L.current),L.current=void 0),$.current=window.setTimeout(R,o)}),[o,R]),H=(0,a.useCallback)((function(){q&&s&&G()}),[s,G,q]),J=(0,a.useCallback)((function(){q&&c&&G()}),[c,G,q]),Q=(0,a.useCallback)((function(e){q&&"Escape"===e.key&&G()}),[q,G]);(0,b.OR)("keydown",h?Q:void 0),(0,a.useEffect)((function(){return function(){clearTimeout(L.current),clearTimeout($.current)}}),[]),(0,b.OR)("mouseleave",G,(function(){return U.current}));var V=(0,a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,d.Z)((0,d.Z)({},e),{},{ref:(0,j.lq)(U,n,F),onMouseEnter:(0,x.v0)(e.onMouseEnter,N),onClick:(0,x.v0)(e.onClick,H),onMouseDown:(0,x.v0)(e.onMouseDown,J),onFocus:(0,x.v0)(e.onFocus,N),onBlur:(0,x.v0)(e.onBlur,G),"aria-describedby":q?B:void 0})}),[N,G,J,q,B,H,F]),ee=(0,a.useCallback)((function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return X((0,d.Z)((0,d.Z)({},n),{},{style:(0,d.Z)((0,d.Z)({},n.style),{},(e={},(0,u.Z)(e,f.j.arrowSize.var,O?(0,x.px)(O):void 0),(0,u.Z)(e,f.j.arrowShadowColor.var,_),e))}),r)}),[X,O,_]),ne=(0,a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,d.Z)((0,d.Z)((0,d.Z)({ref:n},K),e),{},{id:B,role:"tooltip",style:(0,d.Z)((0,d.Z)({},e.style),{},{position:"relative",transformOrigin:f.j.transformOrigin.varRef})})}),[K,B]);return{isOpen:q,show:N,hide:G,getTriggerProps:V,getTooltipProps:ne,getTooltipPositionerProps:ee,getArrowProps:Y,getArrowInnerProps:M}}((0,d.Z)((0,d.Z)({},K),{},{direction:s.direction}));if((0,x.HD)(c)||w)q=a.createElement(v.m$.span,(0,d.Z)({tabIndex:0},A.getTriggerProps()),c);else{var R=a.Children.only(c);q=(0,a.cloneElement)(R,A.getTriggerProps(R.props,R.ref))}var W=!!_,F=A.getTooltipProps({},n),X=W?(0,x.CE)(F,["role","id"]):F,M=(0,x.ei)(F,["role","id"]);return l?a.createElement(a.Fragment,null,q,a.createElement(Z.M,null,A.isOpen&&a.createElement(h.h_,(0,d.Z)({},z),a.createElement(v.m$.div,(0,d.Z)((0,d.Z)({},A.getTooltipPositionerProps()),{},{__css:{zIndex:o.zIndex,pointerEvents:"none"}}),a.createElement(O,(0,d.Z)((0,d.Z)({variants:E},X),{},{initial:"exit",animate:"enter",exit:"exit",__css:o}),l,W&&a.createElement(m.TX,(0,d.Z)({},M),_),y&&a.createElement(v.m$.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper"},a.createElement(v.m$.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:o.bg}}))))))):a.createElement(a.Fragment,null,c)}));x.Ts&&(_.displayName="Tooltip");var y=r(9748),S=r(7890),z=r(9466),P=r(1881),I=r.n(P),T=r(2335),K=r(1875),D=r(7423),q=r(222),A=r(7758),R=r(7519),W=r(6417);var F=function(){var e=(0,s.pm)(),n=(0,S.UO)().filmId,r=a.useState(!1),u=(0,i.Z)(r,2),d=u[0],p=u[1],f=a.useState(!0),h=(0,i.Z)(f,2),v=h[0],g=h[1],x=a.useState(null),m=(0,i.Z)(x,2),w=m[0],Z=m[1],b=a.useState(!1),j=(0,i.Z)(b,2),k=j[0],C=j[1],E=(0,R.uF)(),O=a.useState([]),P=(0,i.Z)(O,2),F=P[0],X=P[1],M=a.useState([]),Y=(0,i.Z)(M,2),B=Y[0],U=Y[1];a.useEffect((function(){var e=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I().get("".concat(T.Z.ks_api,"/favorite/check?filmId=").concat(n),{headers:{Authorization:"Bearer ".concat((0,R.YT)())}});case 3:r=e.sent,r.data.favorite?C(!0):C(!1),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var r,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X([]),U([]),g(!0),e.prev=3,e.next=6,I().get("".concat(T.Z.api_url,"/films/").concat(n),{headers:{"X-API-KEY":T.Z.api_token}});case 6:r=e.sent,o=r.data,Z(o),p(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),p(!0);case 15:return e.prev=15,g(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(){return e.apply(this,arguments)}}();if(r(),!d){var i=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var r,o,i,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I().get("".concat(T.Z.api_url,"/films/").concat(n,"/similars"),{headers:{"X-API-KEY":T.Z.api_token}});case 3:r=e.sent,o=r.data,X(o.items),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,e.next=13,I().get("".concat(T.Z.sequels_and_prequels_url,"/films/").concat(n,"/sequels_and_prequels"),{headers:{"X-API-KEY":T.Z.api_token}});case 13:i=e.sent,a=i.data,U(a),e.next=20;break;case 18:e.prev=18,e.t1=e.catch(10);case 20:case"end":return e.stop()}}),e,null,[[0,8],[10,18]])})));return function(){return e.apply(this,arguments)}}();i()}e()}),[n]);var L=a.useState(window.innerWidth),$=(0,i.Z)(L,2),N=$[0],G=$[1];a.useEffect((function(){var e=function(){G(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var H=N<=768,J=function(){var r=(0,o.Z)((0,t.Z)().mark((function r(){return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!k){r.next=7;break}return C(!1),r.next=5,I().post("".concat(T.Z.ks_api,"/favorite/remove"),{filmId:n},{headers:{Authorization:"Bearer ".concat((0,R.YT)())}});case 5:r.next=10;break;case 7:return C(!0),r.next=10,I().post("".concat(T.Z.ks_api,"/favorite/add"),{filmId:n},{headers:{Authorization:"Bearer ".concat((0,R.YT)())}});case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),e({title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",description:"".concat(r.t0),status:"error",duration:3e3,isClosable:!0,variant:H?"top-accent":"left-accent",position:H?"top":"bottom-left"});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(){return r.apply(this,arguments)}}();return(0,W.jsx)(W.Fragment,{children:v&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(q.D,{title:"KinoSearch"}),(0,W.jsx)(K.Z,{})]})||(0,W.jsx)(W.Fragment,{children:d&&(0,W.jsxs)(c.M5,{h:"80vh",children:[(0,W.jsx)(q.D,{title:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u2013 KinoSearch"}),(0,W.jsx)(c.X6,{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]})||(0,W.jsxs)(c.Kq,{direction:"column",spacing:10,children:[(0,W.jsx)(q.D,{title:"".concat(w.nameRu||w.nameEn||w.nameOriginal," \u2013 KinoSearch")}),(0,W.jsxs)(c.Kq,{spacing:"50px",direction:["column","row"],paddingRight:[0,10],children:[(0,W.jsx)(l.Ee,{src:w.posterUrl,w:["auto","350px"],borderRadius:"20px"}),(0,W.jsxs)(c.Kq,{direction:"column",spacing:"20px",w:"100%",children:[(0,W.jsxs)(c.Kq,{direction:"row",justifyContent:"space-between",spacing:"15px",children:[(0,W.jsx)(c.X6,{size:"xl",fontWeight:"800",children:w.nameRu||w.nameEn||w.nameOriginal}),w.ratingKinopoisk||w.ratingImdb||w.ratingFilmCritics?(0,W.jsx)(_,{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u0444\u0438\u043b\u044c\u043c\u0430",hasArrow:!0,bg:"#252525",color:"white",placement:"left",children:(0,W.jsx)(c.M5,{children:(0,W.jsx)(c.Ct,{colorScheme:"green",variant:"subtle",fontSize:"lg",children:w.ratingKinopoisk||w.ratingImdb||w.ratingFilmCritics})})}):null]}),(0,W.jsx)(c.xv,{fontWeight:"500",fontSize:"lg",children:w.shortDescription||w.slogan||w.description}),(0,W.jsxs)(c.Kq,{direction:"row",spacing:"10px",children:[(0,W.jsx)(y.zx,{colorScheme:"brand",variant:"outline",size:"lg",borderRadius:"30px",w:"100%",as:z.rU,to:"/watch/".concat(n),children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c"}),E&&(0,W.jsx)(y.hU,{"aria-label":"Favorite",color:k?"brand.500":"white",icon:(0,W.jsx)(A.r7,{w:6,h:6}),size:"lg",onClick:J})]}),(0,W.jsx)(c.X6,{size:"xl",fontWeight:"800",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0444\u0438\u043b\u044c\u043c\u0435"}),(0,W.jsxs)(c.xv,{fontWeight:"500",fontSize:"lg",children:["\u0413\u043e\u0434 \u0432\u044b\u043f\u0443\u0441\u043a\u0430: ",w.year||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",(0,W.jsx)("br",{}),"\u0421\u0442\u0440\u0430\u043d\u0430: ",w.countries[0].country||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",(0,W.jsx)("br",{}),"\u0416\u0430\u043d\u0440: ",w.genres[0].genre||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"]})]})]}),0!==B.length&&(0,W.jsxs)(c.xu,{children:[(0,W.jsxs)(c.X6,{size:"md",fontWeight:"700",children:["\u0421\u0438\u043a\u0432\u0435\u043b\u044b \u0438 \u043f\u0440\u0438\u043a\u0432\u0435\u043b\u044b"," ",(0,W.jsx)(c.Ct,{ml:"1",fontSize:"md",children:B.length})]}),(0,W.jsx)(c.xu,{paddingTop:5,children:(0,W.jsx)(c.Kq,{direction:"row",overflow:"auto",overflowX:"auto",spacing:"20px",children:B.map((function(e){return(0,W.jsx)(D.Z,{film:e})}))})})]}),0!==F.length&&(0,W.jsxs)(c.xu,{children:[(0,W.jsxs)(c.X6,{size:"md",fontWeight:"700",children:["\u041f\u043e\u0445\u043e\u0436\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"," ",(0,W.jsx)(c.Ct,{ml:"1",fontSize:"md",children:F.length})]}),(0,W.jsx)(c.xu,{paddingTop:5,children:(0,W.jsx)(c.Kq,{direction:"row",overflow:"auto",overflowX:"auto",spacing:"20px",children:F.map((function(e){return(0,W.jsx)(D.Z,{film:e})}))})})]})]})})})}}}]);