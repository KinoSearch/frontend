"use strict";(self.webpackChunkkinosearch_v2=self.webpackChunkkinosearch_v2||[]).push([[328],{6328:function(e,r,t){t.r(r);var s=t(1413),n=t(4165),a=t(7762),i=t(5861),o=t(9439),c=t(7313),l=t(4390),d=t(3964),u=t(720),p=t(3068),h=t(9748),m=t(5627),f=t(1881),x=t.n(f),w=t(2335),v=t(7519),b=t(9466),j=t(6417);r.default=function(){var e=(0,l.pm)(),r=c.useState(!1),t=(0,o.Z)(r,2),f=t[0],g=t[1],y=c.useState(window.innerWidth),k=(0,o.Z)(y,2),Z=k[0],C=k[1];c.useEffect((function(){var e=function(){C(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var I=Z<=768,E=(0,m.cI)(),S=E.register,_=E.handleSubmit,q=E.formState.errors,z=E.setError,D=_(function(){var r=(0,i.Z)((0,n.Z)().mark((function r(t){var s,i,o,c,l,d,u,p,h,m;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(g(!0),r.prev=1,s=!1,/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(t.email)||(z("email",{type:"custom",message:"Email \u0432\u0432\u0435\u0434\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e"}),s=!0),!s){r.next=6;break}return r.abrupt("return");case 6:return r.next=8,x().post("".concat(w.Z.ks_api,"/auth/login"),t);case 8:if(i=r.sent,(o=i.data).errors){c=(0,a.Z)(o.errors);try{for(c.s();!(l=c.n()).done;)"auth"===(d=l.value).rule&&(z("email",{type:"custom",message:d.message}),z("password",{type:"custom",message:d.message}))}catch(m){c.e(m)}finally{c.f()}}else(0,v.D0)(o.auth.token),window.location.href="/";r.next=16;break;case 13:if(r.prev=13,r.t0=r.catch(1),r.t0.response.data){u=r.t0.response.data;try{p=(0,a.Z)(u.errors);try{for(p.s();!(h=p.n()).done;)"auth"===(m=h.value).rule&&e({title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",description:"".concat(m.message),status:"error",duration:3e3,isClosable:!0,variant:I?"top-accent":"left-accent",position:I?"top":"bottom-left"})}catch(m){p.e(m)}finally{p.f()}}catch(n){e({title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",description:"".concat(r.t0),status:"error",duration:3e3,isClosable:!0,variant:I?"top-accent":"left-accent",position:I?"top":"bottom-left"})}}else e({title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",description:"".concat(r.t0),status:"error",duration:3e3,isClosable:!0,variant:I?"top-accent":"left-accent",position:I?"top":"bottom-left"});case 16:return r.prev=16,g(!1),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[1,13,16,19]])})));return function(e){return r.apply(this,arguments)}}());return(0,j.jsx)(d.xu,{w:"100%",children:(0,j.jsx)(d.M5,{children:(0,j.jsx)(d.W2,{maxW:["full","sm"],children:(0,j.jsx)("form",{onSubmit:D,children:(0,j.jsxs)(d.Kq,{direction:"column",spacing:5,children:[(0,j.jsx)(d.M5,{children:(0,j.jsx)(d.X6,{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"})}),(0,j.jsxs)(u.NI,{isInvalid:!!q.email,children:[(0,j.jsx)(p.II,(0,s.Z)({placeholder:"Email",isDisabled:f,borderColor:"#929292",focusBorderColor:"brand.500",_placeholder:{color:"white"}},S("email",{required:!0}))),q.email&&(0,j.jsx)(u.J1,{children:"required"===q.email.type&&(0,j.jsx)(j.Fragment,{children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 Email"})||(0,j.jsx)(j.Fragment,{children:q.email.message})})]}),(0,j.jsxs)(u.NI,{isInvalid:!!q.password,children:[(0,j.jsx)(p.II,(0,s.Z)({placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",isDisabled:f,borderColor:"#929292",focusBorderColor:"brand.500",type:"password",_placeholder:{color:"white"}},S("password",{required:!0}))),q.password&&(0,j.jsx)(u.J1,{children:"required"===q.password.type&&(0,j.jsx)(j.Fragment,{children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})||(0,j.jsx)(j.Fragment,{children:q.password.message})})]}),(0,j.jsx)(h.zx,{w:"100%",isLoading:f,type:"submit",colorScheme:"brand",size:"md",children:"\u0412\u043e\u0439\u0442\u0438"}),(0,j.jsx)(d.M5,{w:"100%",children:(0,j.jsxs)(d.xv,{children:["\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?"," ",(0,j.jsx)(d.rU,{color:"brand.500",_hover:{color:"brand.600",textDecoration:"none"},as:b.rU,to:"/register",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})})]})})})})})}}}]);