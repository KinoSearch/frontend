"use strict";(self.webpackChunkkinosearch_v2=self.webpackChunkkinosearch_v2||[]).push([[512],{9512:function(e,r,n){n.r(r);var s=n(1413),t=n(7762),a=n(4165),o=n(5861),i=n(9439),c=n(7313),d=n(4390),u=n(3964),l=n(720),p=n(3068),h=n(9748),f=n(5627),w=n(2335),x=n(1881),v=n.n(x),m=n(7890),j=n(1875),b=n(7519),_=n(6417);r.default=function(){var e=(0,d.pm)(),r=c.useState(window.innerWidth),n=(0,i.Z)(r,2),x=n[0],g=n[1];c.useEffect((function(){var e=function(){g(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var Z=x<=768,k=c.useState(null),y=(0,i.Z)(k,2),I=y[0],C=y[1],S=(0,m.s0)();c.useEffect((function(){var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v().get("".concat(w.Z.ks_api,"/user/info"),{headers:{Authorization:"Bearer ".concat((0,b.YT)())}});case 3:r=e.sent,n=r.data,C(n.user),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),S("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var z=c.useState(!1),q=(0,i.Z)(z,2),E=q[0],F=q[1],B=(0,f.cI)(),W=B.register,L=B.handleSubmit,T=B.formState.errors,A=B.setError,D=L(function(){var r=(0,o.Z)((0,a.Z)().mark((function r(n){var s,o,i,c,d;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,F(!0),r.next=4,v().post("".concat(w.Z.ks_api,"/user/change_password"),n,{headers:{Authorization:"Bearer ".concat((0,b.YT)())}});case 4:if(s=r.sent,(o=s.data).errors){i=(0,t.Z)(o.errors);try{for(i.s();!(c=i.n()).done;)"auth"===(d=c.value).rule&&A("current_password",{type:"custom",message:d.message})}catch(a){i.e(a)}finally{i.f()}}else e({title:"\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d",status:"success",duration:3e3,isClosable:!0,variant:Z?"top-accent":"left-accent",position:Z?"top":"bottom-left"}),S("/settings/edit");r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),e({title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(r.t0),status:"error",duration:3e3,isClosable:!0,variant:Z?"top-accent":"left-accent",position:Z?"top":"bottom-left"});case 12:return r.prev=12,F(!1),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,9,12,15]])})));return function(e){return r.apply(this,arguments)}}());return(0,_.jsx)(_.Fragment,{children:!I&&(0,_.jsx)(j.Z,{})||(0,_.jsx)(u.xu,{w:"100%",paddingTop:[10,0],children:(0,_.jsx)(u.M5,{children:(0,_.jsx)(u.W2,{maxW:["full","sm"],children:(0,_.jsx)("form",{onSubmit:D,children:(0,_.jsxs)(u.Kq,{direction:"column",spacing:5,children:[(0,_.jsx)(u.M5,{children:(0,_.jsx)(u.X6,{children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})}),(0,_.jsxs)(l.NI,{isInvalid:!!T.current_password,children:[(0,_.jsx)(p.II,(0,s.Z)({placeholder:"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",borderColor:"#929292",type:"password",isDisabled:E,focusBorderColor:"brand.500",_placeholder:{color:"white"}},W("current_password",{required:!0}))),T.current_password&&(0,_.jsx)(l.J1,{children:"required"===T.current_password.type&&(0,_.jsx)(_.Fragment,{children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"})||(0,_.jsx)(_.Fragment,{children:T.current_password.message})})]}),(0,_.jsxs)(l.NI,{isInvalid:!!T.new_password,children:[(0,_.jsx)(p.II,(0,s.Z)({placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",borderColor:"#929292",isDisabled:E,type:"password",focusBorderColor:"brand.500",_placeholder:{color:"white"}},W("new_password",{required:!0}))),T.new_password&&(0,_.jsx)(l.J1,{children:"required"===T.new_password.type&&(0,_.jsx)(_.Fragment,{children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"})||(0,_.jsx)(_.Fragment,{children:T.new_password.message})})]}),(0,_.jsx)(h.zx,{w:"100%",isLoading:E,type:"submit",colorScheme:"brand",size:"md",children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})})})})})})}}}]);